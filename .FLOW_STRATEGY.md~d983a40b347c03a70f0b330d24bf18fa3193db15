# Flow Strategy — Pawz vs n8n & Kinetic Flow Roadmap

> **Status**: Active — working through phases  
> **Created**: 2026-02-27  
> **Principle**: *"n8n is a workflow engine without a brain. OpenClaw is a brain in someone else's cloud. Pawz is a brain on your machine, with a workflow engine inside it, that remembers everything, talks to everyone, and costs you nothing to run."*

---

## 1. What Pawz IS (and n8n is NOT)

**n8n** is a **workflow automation platform** — a cloud/self-hosted backend that connects services via visual pipelines. It's a tool for ops teams. No personality, no agent memory, no desktop experience. It's plumbing.

**Pawz** is a **private AI agent platform** — a native desktop app where AI agents *live*, remember, converse, and act across 11 channels. Flows are one capability of the agents, not the other way around.

| | n8n | Pawz |
|---|---|---|
| **Core unit** | Workflow (a pipeline of nodes) | Agent (a personality with memory, tools, channels) |
| **Execution model** | Trigger → run pipeline → output | Agent decides → plans → uses flows/tools/memory |
| **User relationship** | Config a pipeline, forget about it | Ongoing conversation with an agent |
| **Data model** | Credentials + executions | Soul files + memory palace + session history |
| **Runtime** | Server process (Node.js) | Native desktop (~5MB binary, Rust + TS) |
| **Network** | Always needs internet for most integrations | Fully offline capable (Ollama, local tools) |
| **Security** | API keys in DB, trust the server | AES-256-GCM vault, OS keychain, 10-layer security, no open ports |

---

## 2. What n8n Does That Pawz Flows Currently Lack

| n8n Feature | Pawz Status | Gap | Phase |
|---|---|---|---|
| **8,500+ community templates** | Zero templates | High | **Phase 2** |
| **Visual builder** (drag, wire, configure) | ✅ Have it (SVG canvas, drag, edge drawing, config panel) | Needs Kinetic polish | **Phase 1** |
| **25,000+ integrations** | MCP Bridge to n8n engine — workflow-level MCP tools (`execute_workflow`) | Medium | Future |
| **Code nodes** (JS/Python inline) | Missing — no "run arbitrary code" node kind | Medium | **Phase 4** |
| **Execute single step** (debug) | Missing — executor runs full graph | Medium | **Phase 3** |
| **Execution history + replay** | Missing — executions are ephemeral | Low | Future |
| **Webhook triggers** | ✅ Inbound webhook server exists | Low | — |
| **Cron/schedule triggers** | Task scheduler exists but not wired to flows | Medium | **Phase 5** |
| **Error workflows** (auto-retry, fallback) | Missing — errors halt execution | Medium | **Phase 6** |
| **Sub-workflows** (call flow from flow) | `group` node kind exists but not executable | Low | Future |
| **AI agent nodes** (LangChain) | ✅ Native — every node can route to any agent | **Pawz advantage** | — |
| **Environments / Git-based deploy** | N/A — desktop app, not server | Non-applicable | — |
| **Queue mode scaling** | N/A — single-user desktop | Non-applicable | — |

---

## 3. What Pawz Does That n8n CANNOT

Unfair advantages — architectural capabilities that can't be bolted onto n8n:

| Pawz Capability | Why n8n Can't Match It |
|---|---|
| **Agent personalities + soul files** | n8n has no concept of persistent AI identity |
| **Memory Palace** (BM25 + vector, temporal decay, auto-recall) | n8n is stateless between executions |
| **Multi-agent orchestration** (Boss/worker, squads, inter-agent messaging) | n8n runs one workflow, not a team of agents |
| **11 simultaneous channel bridges** (Telegram, Discord, Slack, Matrix…) | n8n can trigger from channels but agents don't *live* there |
| **Conversational flow creation** ("connect Slack to summarize daily") | n8n requires manual visual building |
| **The Librarian Method** (Tool RAG — semantic tool discovery from 25K+) | n8n uses a static node palette |
| **The Foreman Protocol** (cheap local execution via Ollama) | n8n executes every node at full cost |
| **Per-agent tool policies + security layers** | n8n has global credentials, no per-agent scoping |
| **Desktop-native, fully offline** | n8n is a server — needs a running process + network |
| **Voice mode** (TTS/STT, continuous voice loop) | n8n has no voice interface |
| **Trading engine** (DeFi, position monitoring, guardrails) | No equivalent |
| **Kinetic Design System** (industrial, VST-grade aesthetic) | n8n has a generic web UI |

---

## 4. Template Strategy

The Zie619 repo has 4,343 n8n workflow JSONs. Don't import — extract the *patterns*.

**Approach:**
- **Don't** import n8n JSON directly (format mismatch, couples to n8n internals)
- **Do** build 20–30 Pawz-native templates inspired by popular n8n patterns, expressed as agent-centric flows
- **Format:** Serialized `FlowGraph` JSON (`serializeGraph`/`deserializeGraph` already exist)
- **Storage:** `~/.paw/flow-templates/` or bundled in binary
- **Later:** Template browser in the flows sidebar (searchable, categorized, one-click instantiate)

**Example templates:**
- "Daily Slack Digest" → trigger(cron) → agent(summarize channels) → output(Slack)
- "GitHub PR Reviewer" → trigger(webhook) → agent(review code) → tool(post comment) → output(GitHub)
- "Email Responder" → trigger(email) → agent(draft reply) → condition(needs approval?) → output(send)
- "Research Pipeline" → trigger(user) → agent(search web) → data(extract) → agent(summarize) → output(doc)
- "Social Monitor" → trigger(cron) → tool(fetch mentions) → agent(analyze sentiment) → condition(negative?) → output(alert)

---

## 5. Kinetic Design Gaps in Flows

Current flows CSS uses generic variables and basic `@keyframes`. **Zero** Kinetic motion primitives are used.

| Kinetic Primitive | Current Usage in Flows | Should Be |
|---|---|---|
| **k-breathe** (heartbeat dot) | ❌ Not used | Running nodes get breathing indicator |
| **k-signal-fire** (horizontal sweep) | ❌ Not used | Edge activation sweeps from source to target |
| **k-spring** (hover scale) | ❌ Not used | Node hover uses spring physics |
| **k-materialise** (grain fade-in) | ❌ Not used | New nodes materialise, don't just appear |
| **k-oscillate** (border modulation) | ❌ Not used | Connected/active nodes oscillate |
| **k-halftone-pulse** (dot pattern) | ❌ Not used | Active execution steps pulse with halftone |
| **k-stagger** (cascading entrance) | ❌ Not used | Flow list items stagger in |
| **Share Tech Mono font** | ❌ Not used on canvas | Node status badges use `--font-pixel` |
| **Grain texture overlay** | ❌ Not used | Canvas background has subtle grain |
| **4-color status system** | Partial | Full `--kinetic-sage/red/gold/steel` mapping |

---

## 6. Competitive Positioning

| Dimension | n8n | OpenClaw | **Pawz** |
|---|---|---|---|
| **Better** | 25,000+ integrations but no agent intelligence | AI agents but cloud-dependent | Agent-first + 25,000+ integrations via invisible n8n engine. Agents *decide* when to use integrations. |
| **Safer** | API keys in a database, trust the server admin | Cloud vendor holds your data | 10-layer security stack. AES-256-GCM vault. No open ports. Fully local. You hold every byte. |
| **Faster** | Server spin-up, Node.js overhead, per-execution cost | Cloud API latency | ~5MB native binary. Ollama local inference. Foreman Protocol = free tool execution. No cloud round-trips. |

---

## Phase Execution Plan

### Phase 1: Kinetic Design Pass on Flows ✅
Apply all 7 motion primitives to the flow engine:
- [x] Canvas grain background (`--grain-opacity` dot pattern on SVG canvas)
- [x] Node materialise on creation (`k-materialise` entrance)
- [x] Node spring hover (`k-spring` scale-up on mouseover)
- [x] Breathing indicators (`k-breathe` dots on running/connected nodes)
- [x] Signal wave on edge activation (`k-signal-fire` sweep along active edges)
- [x] Halftone pulse on executing nodes (`k-halftone-pulse` overlay)
- [x] Staggered list entrance (`k-stagger > k-materialise` for flow sidebar)
- [x] Pixel font for status/kind labels (`Share Tech Mono` for node badges)
- [x] Oscillating borders on connected nodes (`k-oscillate`)
- [x] Status color semantic alignment (Running=red, Success=sage, Warning=gold, Idle=steel)

### Phase 2: Flow Templates (20–30) ✅
- [x] Template data format (extends FlowGraph with category/description/tags)
- [x] 20–30 curated agent-centric templates
- [x] Template browser panel in flows sidebar
- [x] One-click instantiate from template
- [x] Category filter + search

### Phase 3: Step-by-Step Execution (Debug Mode) ✅
- [x] "Execute Next Node" button in toolbar
- [x] Node output inspector panel
- [x] Execution cursor visualization (which node is next)
- [x] Breakpoint support (click node to set)
- [x] Data flow visualization (show values on edges)

### Phase 4: Code Node Kind ✅
- [x] New `FlowNodeKind: 'code'` with inline JS evaluation
- [x] Sandboxed execution context (no `window`, no `document`, limited `fetch`)
- [x] Code editor in config panel (monospace, syntax highlighting optional)
- [x] Input/output data mapping (previous node output → code input → next node input)

### Phase 5: Schedule Trigger Wiring ✅
- [x] Connect existing task scheduler / cron system to flow trigger nodes
- [x] UI: cron expression picker in trigger node config panel
- [x] Auto-start flow on schedule match
- [x] Trigger history log (last N fires)

### Phase 6: Error Handling Edges ✅
- [x] Error output port on every node (separate from success output)
- [x] Retry config per node (count, delay, backoff)
- [x] Fallback path (error edge → recovery node)
- [x] Flow-level error handler (catch-all output)
- [x] Error node kind (logs, alerts, sends notification)

---

## Reference: Kinetic Design Tokens

```css
--kinetic-black: #050505    /* Void canvas */
--kinetic-red:   #FF4D4D    /* Primary accent */
--kinetic-cream: #E8E0D4    /* Primary text */
--kinetic-sage:  #8FB0A0    /* Success/healthy */
--kinetic-white: #F5F0EB    /* Light theme bg */
--kinetic-steel: #7A8B9A    /* Info/neutral */
--kinetic-gold:  #D4A853    /* Warning */
--grain-opacity: 0.04       /* Grain overlay */
--halftone-opacity: 0.03    /* Halftone dots */
```

## Reference: Kinetic Motion Primitives

1. **k-breathe** — 2.4s heartbeat dot (7px, border-radius: 50%, box-shadow glow)
2. **k-signal-fire** — 0.8s horizontal sweep (linear-gradient, 200% background-size)
3. **k-spring** — 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) scale(1.015) translateY(-1px)
4. **k-materialise** — 0.5s fade-in with scale(0.97→1) and contrast shift
5. **k-oscillate** — 4s border-color modulation
6. **k-halftone-pulse** — radial-gradient dot pattern reveal
7. **k-stagger** — 40ms per-child animation-delay cascade

---

*This file is hidden (dotfile) and tracks strategic direction + implementation phases.*
